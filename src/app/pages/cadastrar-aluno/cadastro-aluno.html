<app-sidebar></app-sidebar>
<app-search-compass></app-search-compass>

<div class="cadastro-container">
  <div class="header">
    <div class="header-content-wrapper">
      <h1>{{ aluno.nome }}</h1>
      <p><strong>Código:</strong> {{ aluno.codigo }}</p>
    </div>
  </div>

  <section>
    <div class="section-header-wrapper">
      <h2>Informações do aluno</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn" (click)="openEditAlunoPopup()">&#x270E;</button>
      </div>
    </div>
    <div class="info-row">
      <div><strong>Nome:</strong> {{ aluno.nome }}</div>
      <div><strong>Data de nascimento:</strong> {{ aluno.nascimento }}</div>
    </div>
    <div class="info-row">
      <div><strong>CPF:</strong> {{ aluno.cpf }}</div>
    </div>
  </section>

  <section>
    <div class="section-header-wrapper">
      <h2>Informações do responsável</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn">&#x270E;</button>
      </div>
    </div>
    <div class="info-row">
      <div><strong>Nome:</strong> {{ responsavel.nome }}</div>
      <div><strong>Data de nascimento:</strong> {{ responsavel.dataNascimento }}</div>
    </div>
    <div class="info-row">
      <div><strong>CPF:</strong> {{ responsavel.cpf }}</div>
      <div><strong>Telefone:</strong> {{ responsavel.telefone }}</div>
    </div>
  </section>

  <section>
    <div class="section-header-wrapper">
      <h2>Endereço</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn">&#x270E;</button>
      </div>
    </div>
    <div class="info-row">
      <div><strong>Rua:</strong> {{ endereco.rua }}</div>
      <div><strong>Nº Casa:</strong> {{ endereco.numero }}</div>
    </div>
    <div class="info-row">
      <div><strong>Bairro:</strong> {{ endereco.bairro }}</div>
      <div><strong>CEP:</strong> {{ endereco.cep }}</div>
    </div>
    <div class="info-row">
      <div><strong>Cidade:</strong> {{ endereco.cidade }}</div>
      <div><strong>Complemento:</strong> {{ endereco.complemento || '-' }}</div>
    </div>
  </section>

  <section>
    <div class="section-header-wrapper">
      <h2>Escola</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn">&#x270E;</button>
      </div>
    </div>
    <div class="info-row">
      <div><strong>Escola:</strong> {{ escola.nome }}</div>
      <div><strong>Período:</strong> {{ escola.periodo }}</div>
      <div><strong>Linha de van:</strong> {{ escola.linhaVan }}</div>
    </div>
  </section>

  <section>
    <div class="section-header-wrapper">
      <h2>Financeiro</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn">&#x270E;</button>
      </div>
    </div>
    <div class="info-row">
      <div><strong>Mensalidade:</strong> R$ {{ financeiro.mensalidade | number:'1.2-2' }}</div>
      <div><strong>Dia do pagamento:</strong> {{ financeiro.diaPagamento }}</div>
    </div>
  </section>

  <section>
    <div class="section-header-wrapper">
      <h2>Anotações</h2>
      <div class="header-icons">
        <button class="action-icon-btn">&#x21BB;</button>
        <button class="action-icon-btn">&#x270E;</button>
      </div>
    </div>
    <textarea [(ngModel)]="anotacoes" placeholder="Digite aqui..."></textarea>
  </section>
</div>

<div class="popup-overlay" *ngIf="showEditAlunoPopup">
  <div class="popup-content-new-style">
    <h3 class="popup-title-new-style">Dados Pessoais</h3>
    <form (ngSubmit)="saveAlunoChanges()">

      <div class="form-row-new-style">
        <div class="form-group-new-style label-col1">
          <label for="alunoNomeNew">Nome</label>
          <input id="alunoNomeNew" type="text" [(ngModel)]="editedAluno.nome" name="nomeAlunoNew">
        </div>
        <div class="form-group-new-style label-col2">
          <label for="alunoNascimentoNew">Data de nascimento</label>
          <input id="alunoNascimentoNew" type="text" [(ngModel)]="editedAluno.nascimento" name="nascimentoAlunoNew" placeholder="DD/MM/AAAA">
        </div>
      </div>

      <div class="form-row-new-style">
        <div class="form-group-new-style label-col1">
          <label for="alunoCpfNew">CPF</label>
          <input id="alunoCpfNew" type="text" [(ngModel)]="editedAluno.cpf" name="cpfAlunoNew">
        </div>
        <div class="form-group-new-style label-col2">
          <label for="alunoRgNew">RG</label>
          <input id="alunoRgNew" type="text" [(ngModel)]="editedAluno.rg" name="rgAlunoNew">
        </div>
      </div>

      <div class="popup-actions-new-style">
        <label class="checkbox-container">
          <input type="checkbox" [(ngModel)]="confirmChanges" name="confirmChanges">
          Confirmar
        </label>
        <button type="submit" class="update-btn">Atualizar</button>
      </div>
    </form>
  </div>
</div>
